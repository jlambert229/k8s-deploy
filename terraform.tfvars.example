# --- Libvirt ---
# Local connection (running terraform on the KVM host):
libvirt_uri = "qemu:///system"
# Remote connection over SSH:
# libvirt_uri = "qemu+ssh://user@kvm-host/system"

# --- Cluster ---
cluster_name = "talos"
# cluster_vip = "10.0.0.100"  # Set for HA (3 CP nodes)

# --- Talos ---
talos_version    = "v1.9.2"
talos_extensions = ["qemu-guest-agent"]

# Path to the Talos image on the KVM host (see README for download steps)
talos_image_path   = "/var/lib/libvirt/images/talos-v1.9.2-nocloud.raw"
talos_image_format = "raw"
install_disk       = "/dev/vda"

# --- Network ---
network_bridge = "br0"
network_cidr   = "10.0.0.0/24"
gateway        = "10.0.0.1"
nameservers    = ["1.1.1.1", "8.8.8.8"]

# --- Storage ---
storage_pool = "default"

# --- Control Plane ---
controlplane_count  = 1
controlplane_cpu    = 2
controlplane_memory = 4096  # MiB
controlplane_disk   = 20    # GiB

# --- Workers ---
worker_count  = 2
worker_cpu    = 2
worker_memory = 4096  # MiB
worker_disk   = 50    # GiB

# --- IP Offsets ---
# IPs are computed from network_cidr + offset (e.g. 10.0.0.0/24 + 70 = 10.0.0.70)
cp_ip_offset     = 70
worker_ip_offset = 80

# --- Boot ---
uefi = true
